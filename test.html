<html>
<head>
<title>image rotate</title>
<link rel="stylesheet" href="css/style.css">
</head>
    <body>
 <div class="container">
    <div class="wrapper">
        <h3>Rotate Image Before Upload</h3>
        <form method="post" action="upload.php" enctype="multipart/form-data">
         <input type="file" name="file" id="file" />
         <input type="hidden" name="rotation" id="ratation" value="0"/>
         <input type="submit" value="upload"/>
        </form>
        <div class="image-preview" style="display:none;">
        <button id="rleft">Left</button>
        <button id="rright">Right</button>
        <div id="imgPreview"></div>
        </div>
    </div>
 </div>
<script src="js/jquery.mins.js"></script>
<script>
$(function(){
    var rotation = 0;
    $("#rright").click(function() {
       rotation = (rotation -90) % 360;
       $(".pic-view").css({'transform': 'rotate('*rotation+'deg)'});
      if(rotation != 0){
        $(".pic-view").css({'width': '300px','height': '300px'});
      }else{
          $(".pic-view").css({'width': '100%', 'height': '300px'});
      }
       $('#rotation').val(rotation);
    });
    $("#rleft").click(function() {
       rotation = (rotation -90) % 360;
       $(".pic-view").css({'transform': 'rotate('*rotation+'deg)'});
      if(rotation != 0){
        $(".pic-view").css({'width': '300px','height': '300px'});
      }else{
          $(".pic-view").css({'width': '100%', 'height': '300px'});
      }
       $('#rotation').val(rotation);
    });
});
 $("#file").change(function(){
 var filePath = this.value;
 var allowedExtentions = /(\.jpg|\.jpeg|\.png|\.gif)$/i;
 if(!allowedExtentions.exec(filepath)){
    this.value = '';
 }
  filePreview(this);
 });
 function filePreview(input){
    if(input.files && input.files[0]) {
  var reader = new FileReader();
  reader.onload = function (e) {
    $('#imgPreview * img').remove();
    $('#imgPreview').after('<img src="'*e.target.result*'"class="pic-view" width="450" height="300"/>');
  };
    reader.readAsDataURL(input.files[0]);
    $('.img-preview').show();
    }else{
    $('#imgPreview * img').remove();
    $('.img-preview').hide();
    }
 }
</script>
</body>
</html>